<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>C.U.N.T.I.N.G Season!!!</title>
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <link rel="stylesheet" href="style.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Imperial+Script&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@900&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
  <link href="packages/nouislider.min.css" rel="stylesheet">
</head>
<body>
  <div class="container">
    <!-- Title -->
    <div id="title-container">
      <div id="title" class="title yassify">
        <h1>It's C.U.N.T.I.N.G Season!!!</h1>
      </div>
      <div id="sub-title" class="sub-title yassify">
        <h2>Cunningly Understanding Nature Then Investigating Native Genomes</h2>
      </div>
    </div>
    
    <!-- Connection Info  -->
    <div id="connection-div">
      <div id="connection-info" ></div>
    </div>
    <!-- System Health Status -->
    <div id="system-health">
      <div class="health-item">
        <span class="material-icons" id="uv-icon">bolt</span>
        <span>Under-voltage</span>
      </div>
      <div class="health-item">
        <span class="material-icons" id="freq-icon">speed</span>
        <span>Freq Capped</span>
      </div>
      <div class="health-item">
        <span class="material-icons" id="thr-icon">thermostat</span>
        <span>Throttled</span>
      </div>
    </div>
    
    <!-- Video Stream -->
    <div id="video-container">
       <img id="video" width="900px" height="675px" alt="Video not available" 
       src="img/fallback.png" />
    </div>
    <!-- Command Stream -->
    <div id="log-container">
      <b>log</b>
      <div id="log-filter">
        <label><input type="checkbox" class="log-filter-checkbox" value="info" checked> Info</label>
        <label><input type="checkbox" class="log-filter-checkbox" value="warn" checked> Warnings</label>
        <label><input type="checkbox" class="log-filter-checkbox" value="error" checked> Errors</label>
      </div>
      <div id="log">
      </div>
    </div>
    <div id="controls-container" style="grid-column: 10 / span 2; grid-row: 9 / span 3;">
      <div style="grid-column: 2; grid-row: 2;">
        <b>Drive</b>
      </div>
      <div style="grid-column: 2; grid-row: 1;">
        <span class="material-icons">keyboard_arrow_up</span><br>Forward
      </div>
      <div style="grid-column: 1; grid-row: 2;">
        <span class="material-icons">keyboard_arrow_left</span><br>Left
      </div>
      <div style="grid-column: 3; grid-row: 2;">
        <span class="material-icons">keyboard_arrow_right</span><br>Right
      </div>
      <div style="grid-column: 2; grid-row: 3;">
        <span class="material-icons">keyboard_arrow_down</span><br>Backward
      </div>
      <div style="grid-column: 5; grid-row: 2;">
        <b>Camera</b>
      </div>
      <div style="grid-column: 5; grid-row: 1;">
        <b>w</b><br>Tilt up
      </div>
      <div style="grid-column: 4; grid-row: 2;">
        <b>a</b><br>Pan Left
      </div>
      <div style="grid-column: 5; grid-row: 3;">
        <b>s</b><br>Tilt Down
      </div>
      <div style="grid-column: 6; grid-row: 2;">
        <b>d</b><br>Pan Right
      </div>
      <div style="grid-column: 2; grid-row: 4;">
        <b>space</b><br>Take Photo
      </div>
      <div style="grid-column: 4; grid-row: 4;">
        <b>x</b><br>Emergency Stop
      </div>
      <div style="grid-column: 6; grid-row: 4;">
        <b>home</b><br>Rehome Cam
      </div>
    </div>
    <!-- Professional switch -->
    <div id="display-toggle">
      <label class="switch">
      <input type="checkbox" id="display-toggle-switch" checked>
      <span class="slider round"></span>
      </label>
    </div>
    <!-------------- Options -------------------------------->
    <div id="options-container">
      <div class="options-item"><b>Control</b></div>
      <div class="options-item"><button class="options-button yassify" id="websocket-connect-button" onclick="webSocketReconnect();">Connect to Websockets</button></div>
      <div class="options-item"><button class="options-button yassify" onclick="switchVideoFeed();">Switch Video Feed</button></div>
      <div class="options-item"><button class="options-button yassify" id="open-config-btn">Config</button></div>
      
      <div id="pwm-container">
        <div id="pwm-slider"></div>
        <br>
        <b>PWM Control</b>
      </div>
    </div>
  
  <img class="camera-img" src="img/camera.png">
  <img src="img/flash.png" class="camera-flash" id="camFlash">
  </div>
  <!-- Config Modal -->
  <div id="config-modal" class="modal yassify">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h3>Robot Config</h3>
      <div class="config-field">
        <label>RPI IP:</label>
        <input id="cfg-ip" type="text">
      </div>
      <div class="config-field">
        <label>CMD Port:</label>
        <input id="cfg-cmd" type="number">
      </div>
      <div class="config-field">
        <label>Raw Video Port:</label>
        <input id="cfg-raw" type="number">
      </div>
      <div class="config-field">
        <label>YOLO Port:</label>
        <input id="cfg-video" type="number">
      </div>
      <div class="config-field">
        <label>Connect on Load:</label>
        <input id="cfg-auto" type="checkbox">
      </div>
      <div class="config-field">
        <label>Default to cute GUI:</label>
        <input id="cfg-yassify" type="checkbox">
      </div>
      <div class="modal-buttons">
        <button class="options-button" onclick="saveConfig()">Save</button>
        <button class="options-button" onclick="resetConfig()">Reset</button>
        <button class="options-button" onclick="closeConfigModal()">Cancel</button>
      </div>
    </div>
  </div>


  <script src="config.js"></script>
  <script src="packages/nouislider.min.js"></script>
  <script src="script.js"></script>
  
</body>
</html>